#include <stdio.h>
#include <string.h>
#include <ctype.h>

// Função para calcular o dígito verificador
int calcularDigito(char cpf[], int tamanho) {
    int soma = 0, peso = tamanho + 1;
    for (int i = 0; i < tamanho; i++) {
        soma += (cpf[i] - '0') * peso--;
    }
    int resto = (soma * 10) % 11;
    if (resto == 10 || resto == 11) resto = 0;
    return resto;
}

// Função para validar o CPF
int validarCPF(char cpf[]) {
    // Verificar se o CPF tem 11 dígitos
    if (strlen(cpf) != 11) return 0;

    // Verificar se todos os dígitos são iguais (CPF inválido)
    int todos_iguais = 1;
    for (int i = 1; i < 11; i++) {
        if (cpf[i] != cpf[0]) {
            todos_iguais = 0;
            break;
        }
    }
    if (todos_iguais) return 0;

    // Calcular os dígitos verificadores
    int digito1 = calcularDigito(cpf, 9);
    int digito2 = calcularDigito(cpf, 10);

    // Verificar se os dígitos calculados correspondem aos do CPF
    if (digito1 == (cpf[9] - '0') && digito2 == (cpf[10] - '0')) return 1;

    return 0;
}

int main() {
    char cpf[12];
    printf("Digite o CPF (apenas numeros): ");
    scanf("%11s", cpf);

    // Verificar se o CPF é válido
    if (validarCPF(cpf)) {
        printf("CPF valido!\n");
    } else {
        printf("CPF invalido!\n");
    }

    return 0;
}
